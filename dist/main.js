!function(n){var t={};function e(g){if(t[g])return t[g].exports;var B=t[g]={i:g,l:!1,exports:{}};return n[g].call(B.exports,B,B.exports,e),B.l=!0,B.exports}e.m=n,e.c=t,e.d=function(n,t,g){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:g})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/styles/index.css\nvar styles = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/asset_manager.js\n\n\n\nconst Assets = (function() {\n\n  let assets = {};\n\n  function loadAssets(assetOwners, callback) {\n    let tempAssetPaths = []\n    for (let assetOwner of assetOwners) {\n      tempAssetPaths = tempAssetPaths.concat(assetOwner.assetPaths);\n    }\n    let assetPaths = [... new Set(tempAssetPaths)];\n\n    let assetsRemaining = assetPaths.length;\n    for (let assetPath of assetPaths) {\n      let asset = new Image();\n      asset.onload = function() {\n        assets[assetPath] = asset;\n        assetsRemaining--;\n        if (assetsRemaining <= 0) {\n          for (let assetOwner of assetOwners) {\n            assetOwner.loadComplete();\n          }\n          callback();\n        }\n      };\n      asset.src = assetPath;\n    }\n  }\n\n  function get(assetPath) {\n    return assets[assetPath];\n  }\n\n  return {\n    loadAssets: loadAssets,\n    get: get\n  }\n\n})();\n\n// CONCATENATED MODULE: ./src/util.js\n\n\n\nconst tileImagePaths = [\n  './src/img/ground_tiles/brickpavers2.png',\n  './src/img/ground_tiles/concrete368a.png',\n  './src/img/ground_tiles/cretebrick970.png',\n  './src/img/ground_tiles/dirt.png',\n  './src/img/ground_tiles/dirtsand2.png',\n  './src/img/ground_tiles/rock.png',\n  './src/img/ground_tiles/snow.png',\n  './src/img/ground_tiles/stone.png'\n];\n\nconst mobileSpritePath = [\n  './src/img/mobiles/8way_mobile.png'\n]\n\nconst rand = (max) => {\n  return Math.floor(Math.random() * Math.floor(max));\n}\n\n// CONCATENATED MODULE: ./src/asset_owner.js\n\n\n\nclass AssetOwner {\n\n  constructor(assetPaths) {\n    this.assetPaths = assetPaths;\n  }\n\n}\n\n// CONCATENATED MODULE: ./src/map.js\n\n\n\n\n\n\n\nclass map_Map extends AssetOwner {\n\n  constructor(tileImagePaths, mapSize, tileWidth, tileHeight) {\n    super(tileImagePaths);\n    this.mapSize = mapSize;\n    this.tileWidth = tileWidth;\n    this.tileHeight = tileHeight;\n    this.mapDef = buildMapDef(this);\n  }\n\n  loadComplete() {\n    this.mapImage = drawMap(this);\n  }\n\n};\n\nfunction buildMapDef(map) {\n  let mapDef = [];\n  for (let i = 0; i < map.mapSize; i++) {\n    mapDef[i] = [];\n    for (let j = 0; j < map.mapSize; j++) {\n      mapDef[i][j] = map.assetPaths[rand(map.assetPaths.length)];\n    }\n  }\n  return mapDef;\n}\n\nfunction drawMap(map) {\n  let mapCanvas = document.createElement(\"canvas\");\n  mapCanvas.width = map.mapSize * map.tileWidth - map.mapSize;\n  mapCanvas.height = map.mapSize * map.tileHeight - map.mapSize;\n\n  for (let [x, row] of map.mapDef.entries()) {\n    for (let [y, tilePath] of row.entries()) {\n      drawTile(map, mapCanvas.getContext(\"2d\"), Assets.get(tilePath), x, y);\n    }\n  }\n  return mapCanvas;\n}\n\nfunction drawTile(map, context, img, mapX, mapY) {\n  let xOffset = ((map.mapSize * map.tileWidth) / 2) - (map.tileWidth / 2);\n  let contextX = ((mapX - mapY) * (map.tileWidth / 2)) - mapX + xOffset;\n  let contextY = (mapX + mapY) * (map.tileHeight / 2) - mapY;\n  context.drawImage(img, contextX, contextY, map.tileWidth, map.tileHeight);\n}\n\n// CONCATENATED MODULE: ./src/entity.js\n\n\n\n\n\n\nclass entity_Entity extends AssetOwner {\n\n  constructor(assetPaths, startingXLoc, startingYLoc) {\n    super(assetPaths);\n    this.frameWidth = 60;\n    this.frameHeight = 110;\n    this.location = {\n      x: ((startingXLoc === undefined) ? 0 : startingXLoc),\n      y: ((startingYLoc === undefined) ? 0 : startingYLoc)\n    };\n    this.destination = undefined;\n  }\n\n  loadComplete() {}\n\n  get image() {\n    return Assets.get(this.assetPaths[0]);\n  }\n\n  get frameXOrigin() {\n    return 0;\n  }\n\n  get frameYOrigin() {\n    return 0;\n  }\n\n  respondToMouse(event) {\n    this.destination = {x: event.x, y: event.y};\n  }\n\n  tick() {\n    if (this.destination != undefined) {\n      let dx = this.location.x - this.destination.x, dy = this.location.y - this.destination.y;\n      let dist = Math.sqrt(dx*dx+dy*dy);\n\n      let velX = ( dx / dist) * 5;\n      let velY = ( dy / dist ) * 5;\n\n      this.location.x -= velX;\n      this.location.y -= velY;\n    }\n  }\n\n}\n\n// CONCATENATED MODULE: ./src/input.js\n\n\n\nconst Input = (function() {\n\n  let keysDown = [];\n  let keysPressed = [];\n  let mouseEventPoint = undefined;\n\n  function keyDown(keyCode) {\n    if (keysPressed.indexOf(keyCode) < 0) {\n      keysPressed.push(keyCode);\n    }\n    if (keysDown.indexOf(keyCode) < 0) {\n      keysDown.push(keyCode);\n    }\n  }\n\n  function keyUp(keyCode) {\n    keysDown = keysDown.filter( (element) => {\n      return element != keyCode;\n    });\n  }\n\n  function getKeysPressed() {\n    return keysDown.concat(keysPressed.filter( (key) => {\n      return keysDown.indexOf(key) < 0;\n    }));\n  }\n\n  function mouseUp(point) {\n    mouseEventPoint = point;\n  }\n\n  function getMouseEvent() {\n    return mouseEventPoint;\n  }\n\n  function resetInputs() {\n    keysPressed = [];\n    mouseEventPoint = undefined;\n  }\n\n  return {\n    keyDown: keyDown,\n    keyUp: keyUp,\n    getKeysPressed: getKeysPressed,\n    mouseUp: mouseUp,\n    getMouseEvent: getMouseEvent,\n    resetInputs: resetInputs\n  }\n\n})();\n\n// CONCATENATED MODULE: ./src/index.js\n\n\n\n\n\n\n\n\n\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n  console.log(\"Proxma Reverie approaches!\");\n\n  var viewport = document.getElementById('viewport-canvas');\n  var viewportContext = viewport.getContext('2d');\n  let viewportWidth = 600, viewportHeight = 400;\n  viewport.width = viewportWidth;\n  viewport.height = viewportHeight;\n\n  let tileWidth = 128, tileHeight = 64;\n\n  let mapSize = 10;\n\n  let viewOffsetLimitX = (mapSize * tileWidth) - viewportWidth - mapSize;\n  let viewOffsetLimitY = (mapSize * tileHeight) - viewportHeight - mapSize;\n\n  let map = new map_Map(tileImagePaths, mapSize, tileWidth, tileHeight);\n  let mobile = new entity_Entity(mobileSpritePath, viewportWidth / 2, viewportHeight / 2);\n\n  Assets.loadAssets([map, mobile], () => {\n\n    document.getElementById('loading-images-message').classList.add('hide');\n    document.getElementById('images-loaded-message').classList.remove('hide');\n\n    setTimeout(() => {\n      doTick(map);\n    }, 500);\n\n  });\n\n  let viewOffsetX = ((mapSize * tileWidth - mapSize) / 2) - (viewportWidth / 2);\n  let viewOffsetY = ((mapSize * tileHeight - mapSize) / 2) - (viewportHeight / 2);\n\n  function doTick(map) {\n    // console.log('tick');\n    viewportContext.clearRect(0, 0, viewportWidth, viewportHeight);\n    viewportContext.drawImage(map.mapImage, viewOffsetX, viewOffsetY, viewportWidth, viewportHeight, 0, 0, viewportWidth, viewportHeight);\n\n    let mouseEvent = Input.getMouseEvent();\n    if (mouseEvent != undefined) {\n      mobile.respondToMouse(mouseEvent);\n    }\n\n    mobile.tick();\n\n    viewportContext.drawImage(\n      mobile.image,\n      mobile.frameXOrigin, mobile.frameYOrigin,\n      mobile.frameWidth, mobile.frameHeight,\n      mobile.location.x, mobile.location.y,\n      mobile.frameWidth, mobile.frameHeight\n    );\n\n    Input.resetInputs();\n\n    setTimeout(() => {\n      doTick(map);\n    }, 500);\n\n  }\n\n  document.addEventListener('keydown', (event) => {\n    Input.keyDown(event.key);\n  });\n\n  document.addEventListener('keyup', (event) => {\n    Input.keyUp(event.key);\n  });\n\n  viewport.addEventListener('mouseup', (event) => {\n    Input.mouseUp(getCursorPosition(viewport, event));\n  });\n\n  function getCursorPosition(canvas, event) {\n    var rect = canvas.getBoundingClientRect();\n    var x = event.clientX - rect.left;\n    var y = event.clientY - rect.top;\n    return {x: x, y: y};\n  }\n\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hc3NldF9tYW5hZ2VyLmpzP2FlMGMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwuanM/ZTBlYiIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRfb3duZXIuanM/NzRhMiIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwLmpzPzE4YmEiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VudGl0eS5qcz82MjdhIiwid2VicGFjazovLy8uL3NyYy9pbnB1dC5qcz85ZWY4Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBjb25zdCBBc3NldHMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgbGV0IGFzc2V0cyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGxvYWRBc3NldHMoYXNzZXRPd25lcnMsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRlbXBBc3NldFBhdGhzID0gW11cbiAgICBmb3IgKGxldCBhc3NldE93bmVyIG9mIGFzc2V0T3duZXJzKSB7XG4gICAgICB0ZW1wQXNzZXRQYXRocyA9IHRlbXBBc3NldFBhdGhzLmNvbmNhdChhc3NldE93bmVyLmFzc2V0UGF0aHMpO1xuICAgIH1cbiAgICBsZXQgYXNzZXRQYXRocyA9IFsuLi4gbmV3IFNldCh0ZW1wQXNzZXRQYXRocyldO1xuXG4gICAgbGV0IGFzc2V0c1JlbWFpbmluZyA9IGFzc2V0UGF0aHMubGVuZ3RoO1xuICAgIGZvciAobGV0IGFzc2V0UGF0aCBvZiBhc3NldFBhdGhzKSB7XG4gICAgICBsZXQgYXNzZXQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGFzc2V0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhc3NldHNbYXNzZXRQYXRoXSA9IGFzc2V0O1xuICAgICAgICBhc3NldHNSZW1haW5pbmctLTtcbiAgICAgICAgaWYgKGFzc2V0c1JlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgZm9yIChsZXQgYXNzZXRPd25lciBvZiBhc3NldE93bmVycykge1xuICAgICAgICAgICAgYXNzZXRPd25lci5sb2FkQ29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGFzc2V0LnNyYyA9IGFzc2V0UGF0aDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXQoYXNzZXRQYXRoKSB7XG4gICAgcmV0dXJuIGFzc2V0c1thc3NldFBhdGhdO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkQXNzZXRzOiBsb2FkQXNzZXRzLFxuICAgIGdldDogZ2V0XG4gIH1cblxufSkoKTtcbiIsIlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBjb25zdCB0aWxlSW1hZ2VQYXRocyA9IFtcbiAgJy4vc3JjL2ltZy9ncm91bmRfdGlsZXMvYnJpY2twYXZlcnMyLnBuZycsXG4gICcuL3NyYy9pbWcvZ3JvdW5kX3RpbGVzL2NvbmNyZXRlMzY4YS5wbmcnLFxuICAnLi9zcmMvaW1nL2dyb3VuZF90aWxlcy9jcmV0ZWJyaWNrOTcwLnBuZycsXG4gICcuL3NyYy9pbWcvZ3JvdW5kX3RpbGVzL2RpcnQucG5nJyxcbiAgJy4vc3JjL2ltZy9ncm91bmRfdGlsZXMvZGlydHNhbmQyLnBuZycsXG4gICcuL3NyYy9pbWcvZ3JvdW5kX3RpbGVzL3JvY2sucG5nJyxcbiAgJy4vc3JjL2ltZy9ncm91bmRfdGlsZXMvc25vdy5wbmcnLFxuICAnLi9zcmMvaW1nL2dyb3VuZF90aWxlcy9zdG9uZS5wbmcnXG5dO1xuXG5leHBvcnQgY29uc3QgbW9iaWxlU3ByaXRlUGF0aCA9IFtcbiAgJy4vc3JjL2ltZy9tb2JpbGVzLzh3YXlfbW9iaWxlLnBuZydcbl1cblxuZXhwb3J0IGNvbnN0IHJhbmQgPSAobWF4KSA9PiB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKG1heCkpO1xufVxuIiwiXG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXRPd25lciB7XG5cbiAgY29uc3RydWN0b3IoYXNzZXRQYXRocykge1xuICAgIHRoaXMuYXNzZXRQYXRocyA9IGFzc2V0UGF0aHM7XG4gIH1cblxufVxuIiwiXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgcmFuZCB9IGZyb20gXCIuL3V0aWxcIjtcbmltcG9ydCB7IEFzc2V0cyB9IGZyb20gXCIuL2Fzc2V0X21hbmFnZXJcIjtcbmltcG9ydCBBc3NldE93bmVyIGZyb20gXCIuL2Fzc2V0X293bmVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcCBleHRlbmRzIEFzc2V0T3duZXIge1xuXG4gIGNvbnN0cnVjdG9yKHRpbGVJbWFnZVBhdGhzLCBtYXBTaXplLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQpIHtcbiAgICBzdXBlcih0aWxlSW1hZ2VQYXRocyk7XG4gICAgdGhpcy5tYXBTaXplID0gbWFwU2l6ZTtcbiAgICB0aGlzLnRpbGVXaWR0aCA9IHRpbGVXaWR0aDtcbiAgICB0aGlzLnRpbGVIZWlnaHQgPSB0aWxlSGVpZ2h0O1xuICAgIHRoaXMubWFwRGVmID0gYnVpbGRNYXBEZWYodGhpcyk7XG4gIH1cblxuICBsb2FkQ29tcGxldGUoKSB7XG4gICAgdGhpcy5tYXBJbWFnZSA9IGRyYXdNYXAodGhpcyk7XG4gIH1cblxufTtcblxuZnVuY3Rpb24gYnVpbGRNYXBEZWYobWFwKSB7XG4gIGxldCBtYXBEZWYgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXAubWFwU2l6ZTsgaSsrKSB7XG4gICAgbWFwRGVmW2ldID0gW107XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXAubWFwU2l6ZTsgaisrKSB7XG4gICAgICBtYXBEZWZbaV1bal0gPSBtYXAuYXNzZXRQYXRoc1tyYW5kKG1hcC5hc3NldFBhdGhzLmxlbmd0aCldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWFwRGVmO1xufVxuXG5mdW5jdGlvbiBkcmF3TWFwKG1hcCkge1xuICBsZXQgbWFwQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgbWFwQ2FudmFzLndpZHRoID0gbWFwLm1hcFNpemUgKiBtYXAudGlsZVdpZHRoIC0gbWFwLm1hcFNpemU7XG4gIG1hcENhbnZhcy5oZWlnaHQgPSBtYXAubWFwU2l6ZSAqIG1hcC50aWxlSGVpZ2h0IC0gbWFwLm1hcFNpemU7XG5cbiAgZm9yIChsZXQgW3gsIHJvd10gb2YgbWFwLm1hcERlZi5lbnRyaWVzKCkpIHtcbiAgICBmb3IgKGxldCBbeSwgdGlsZVBhdGhdIG9mIHJvdy5lbnRyaWVzKCkpIHtcbiAgICAgIGRyYXdUaWxlKG1hcCwgbWFwQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwgQXNzZXRzLmdldCh0aWxlUGF0aCksIHgsIHkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWFwQ2FudmFzO1xufVxuXG5mdW5jdGlvbiBkcmF3VGlsZShtYXAsIGNvbnRleHQsIGltZywgbWFwWCwgbWFwWSkge1xuICBsZXQgeE9mZnNldCA9ICgobWFwLm1hcFNpemUgKiBtYXAudGlsZVdpZHRoKSAvIDIpIC0gKG1hcC50aWxlV2lkdGggLyAyKTtcbiAgbGV0IGNvbnRleHRYID0gKChtYXBYIC0gbWFwWSkgKiAobWFwLnRpbGVXaWR0aCAvIDIpKSAtIG1hcFggKyB4T2Zmc2V0O1xuICBsZXQgY29udGV4dFkgPSAobWFwWCArIG1hcFkpICogKG1hcC50aWxlSGVpZ2h0IC8gMikgLSBtYXBZO1xuICBjb250ZXh0LmRyYXdJbWFnZShpbWcsIGNvbnRleHRYLCBjb250ZXh0WSwgbWFwLnRpbGVXaWR0aCwgbWFwLnRpbGVIZWlnaHQpO1xufVxuIiwiXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgQXNzZXRzIH0gZnJvbSBcIi4vYXNzZXRfbWFuYWdlclwiO1xuaW1wb3J0IExvYWRhYmxlIGZyb20gXCIuL2Fzc2V0X293bmVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudGl0eSBleHRlbmRzIExvYWRhYmxlIHtcblxuICBjb25zdHJ1Y3Rvcihhc3NldFBhdGhzLCBzdGFydGluZ1hMb2MsIHN0YXJ0aW5nWUxvYykge1xuICAgIHN1cGVyKGFzc2V0UGF0aHMpO1xuICAgIHRoaXMuZnJhbWVXaWR0aCA9IDYwO1xuICAgIHRoaXMuZnJhbWVIZWlnaHQgPSAxMTA7XG4gICAgdGhpcy5sb2NhdGlvbiA9IHtcbiAgICAgIHg6ICgoc3RhcnRpbmdYTG9jID09PSB1bmRlZmluZWQpID8gMCA6IHN0YXJ0aW5nWExvYyksXG4gICAgICB5OiAoKHN0YXJ0aW5nWUxvYyA9PT0gdW5kZWZpbmVkKSA/IDAgOiBzdGFydGluZ1lMb2MpXG4gICAgfTtcbiAgICB0aGlzLmRlc3RpbmF0aW9uID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbG9hZENvbXBsZXRlKCkge31cblxuICBnZXQgaW1hZ2UoKSB7XG4gICAgcmV0dXJuIEFzc2V0cy5nZXQodGhpcy5hc3NldFBhdGhzWzBdKTtcbiAgfVxuXG4gIGdldCBmcmFtZVhPcmlnaW4oKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBnZXQgZnJhbWVZT3JpZ2luKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmVzcG9uZFRvTW91c2UoZXZlbnQpIHtcbiAgICB0aGlzLmRlc3RpbmF0aW9uID0ge3g6IGV2ZW50LngsIHk6IGV2ZW50Lnl9O1xuICB9XG5cbiAgdGljaygpIHtcbiAgICBpZiAodGhpcy5kZXN0aW5hdGlvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBkeCA9IHRoaXMubG9jYXRpb24ueCAtIHRoaXMuZGVzdGluYXRpb24ueCwgZHkgPSB0aGlzLmxvY2F0aW9uLnkgLSB0aGlzLmRlc3RpbmF0aW9uLnk7XG4gICAgICBsZXQgZGlzdCA9IE1hdGguc3FydChkeCpkeCtkeSpkeSk7XG5cbiAgICAgIGxldCB2ZWxYID0gKCBkeCAvIGRpc3QpICogNTtcbiAgICAgIGxldCB2ZWxZID0gKCBkeSAvIGRpc3QgKSAqIDU7XG5cbiAgICAgIHRoaXMubG9jYXRpb24ueCAtPSB2ZWxYO1xuICAgICAgdGhpcy5sb2NhdGlvbi55IC09IHZlbFk7XG4gICAgfVxuICB9XG5cbn1cbiIsIlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBjb25zdCBJbnB1dCA9IChmdW5jdGlvbigpIHtcblxuICBsZXQga2V5c0Rvd24gPSBbXTtcbiAgbGV0IGtleXNQcmVzc2VkID0gW107XG4gIGxldCBtb3VzZUV2ZW50UG9pbnQgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24ga2V5RG93bihrZXlDb2RlKSB7XG4gICAgaWYgKGtleXNQcmVzc2VkLmluZGV4T2Yoa2V5Q29kZSkgPCAwKSB7XG4gICAgICBrZXlzUHJlc3NlZC5wdXNoKGtleUNvZGUpO1xuICAgIH1cbiAgICBpZiAoa2V5c0Rvd24uaW5kZXhPZihrZXlDb2RlKSA8IDApIHtcbiAgICAgIGtleXNEb3duLnB1c2goa2V5Q29kZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24ga2V5VXAoa2V5Q29kZSkge1xuICAgIGtleXNEb3duID0ga2V5c0Rvd24uZmlsdGVyKCAoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGVsZW1lbnQgIT0ga2V5Q29kZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEtleXNQcmVzc2VkKCkge1xuICAgIHJldHVybiBrZXlzRG93bi5jb25jYXQoa2V5c1ByZXNzZWQuZmlsdGVyKCAoa2V5KSA9PiB7XG4gICAgICByZXR1cm4ga2V5c0Rvd24uaW5kZXhPZihrZXkpIDwgMDtcbiAgICB9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3VzZVVwKHBvaW50KSB7XG4gICAgbW91c2VFdmVudFBvaW50ID0gcG9pbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNb3VzZUV2ZW50KCkge1xuICAgIHJldHVybiBtb3VzZUV2ZW50UG9pbnQ7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldElucHV0cygpIHtcbiAgICBrZXlzUHJlc3NlZCA9IFtdO1xuICAgIG1vdXNlRXZlbnRQb2ludCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAga2V5RG93bjoga2V5RG93bixcbiAgICBrZXlVcDoga2V5VXAsXG4gICAgZ2V0S2V5c1ByZXNzZWQ6IGdldEtleXNQcmVzc2VkLFxuICAgIG1vdXNlVXA6IG1vdXNlVXAsXG4gICAgZ2V0TW91c2VFdmVudDogZ2V0TW91c2VFdmVudCxcbiAgICByZXNldElucHV0czogcmVzZXRJbnB1dHNcbiAgfVxuXG59KSgpO1xuIiwiXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7IEFzc2V0cyB9IGZyb20gXCIuL2Fzc2V0X21hbmFnZXJcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQgRW50aXR5IGZyb20gXCIuL2VudGl0eVwiO1xuaW1wb3J0IHsgdGlsZUltYWdlUGF0aHMsIG1vYmlsZVNwcml0ZVBhdGggfSBmcm9tIFwiLi91dGlsXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuL2lucHV0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuXG4gIGNvbnNvbGUubG9nKFwiUHJveG1hIFJldmVyaWUgYXBwcm9hY2hlcyFcIik7XG5cbiAgdmFyIHZpZXdwb3J0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdwb3J0LWNhbnZhcycpO1xuICB2YXIgdmlld3BvcnRDb250ZXh0ID0gdmlld3BvcnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgbGV0IHZpZXdwb3J0V2lkdGggPSA2MDAsIHZpZXdwb3J0SGVpZ2h0ID0gNDAwO1xuICB2aWV3cG9ydC53aWR0aCA9IHZpZXdwb3J0V2lkdGg7XG4gIHZpZXdwb3J0LmhlaWdodCA9IHZpZXdwb3J0SGVpZ2h0O1xuXG4gIGxldCB0aWxlV2lkdGggPSAxMjgsIHRpbGVIZWlnaHQgPSA2NDtcblxuICBsZXQgbWFwU2l6ZSA9IDEwO1xuXG4gIGxldCB2aWV3T2Zmc2V0TGltaXRYID0gKG1hcFNpemUgKiB0aWxlV2lkdGgpIC0gdmlld3BvcnRXaWR0aCAtIG1hcFNpemU7XG4gIGxldCB2aWV3T2Zmc2V0TGltaXRZID0gKG1hcFNpemUgKiB0aWxlSGVpZ2h0KSAtIHZpZXdwb3J0SGVpZ2h0IC0gbWFwU2l6ZTtcblxuICBsZXQgbWFwID0gbmV3IE1hcCh0aWxlSW1hZ2VQYXRocywgbWFwU2l6ZSwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KTtcbiAgbGV0IG1vYmlsZSA9IG5ldyBFbnRpdHkobW9iaWxlU3ByaXRlUGF0aCwgdmlld3BvcnRXaWR0aCAvIDIsIHZpZXdwb3J0SGVpZ2h0IC8gMik7XG5cbiAgQXNzZXRzLmxvYWRBc3NldHMoW21hcCwgbW9iaWxlXSwgKCkgPT4ge1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmctaW1hZ2VzLW1lc3NhZ2UnKS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlcy1sb2FkZWQtbWVzc2FnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9UaWNrKG1hcCk7XG4gICAgfSwgNTAwKTtcblxuICB9KTtcblxuICBsZXQgdmlld09mZnNldFggPSAoKG1hcFNpemUgKiB0aWxlV2lkdGggLSBtYXBTaXplKSAvIDIpIC0gKHZpZXdwb3J0V2lkdGggLyAyKTtcbiAgbGV0IHZpZXdPZmZzZXRZID0gKChtYXBTaXplICogdGlsZUhlaWdodCAtIG1hcFNpemUpIC8gMikgLSAodmlld3BvcnRIZWlnaHQgLyAyKTtcblxuICBmdW5jdGlvbiBkb1RpY2sobWFwKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3RpY2snKTtcbiAgICB2aWV3cG9ydENvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHZpZXdwb3J0V2lkdGgsIHZpZXdwb3J0SGVpZ2h0KTtcbiAgICB2aWV3cG9ydENvbnRleHQuZHJhd0ltYWdlKG1hcC5tYXBJbWFnZSwgdmlld09mZnNldFgsIHZpZXdPZmZzZXRZLCB2aWV3cG9ydFdpZHRoLCB2aWV3cG9ydEhlaWdodCwgMCwgMCwgdmlld3BvcnRXaWR0aCwgdmlld3BvcnRIZWlnaHQpO1xuXG4gICAgbGV0IG1vdXNlRXZlbnQgPSBJbnB1dC5nZXRNb3VzZUV2ZW50KCk7XG4gICAgaWYgKG1vdXNlRXZlbnQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBtb2JpbGUucmVzcG9uZFRvTW91c2UobW91c2VFdmVudCk7XG4gICAgfVxuXG4gICAgbW9iaWxlLnRpY2soKTtcblxuICAgIHZpZXdwb3J0Q29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICBtb2JpbGUuaW1hZ2UsXG4gICAgICBtb2JpbGUuZnJhbWVYT3JpZ2luLCBtb2JpbGUuZnJhbWVZT3JpZ2luLFxuICAgICAgbW9iaWxlLmZyYW1lV2lkdGgsIG1vYmlsZS5mcmFtZUhlaWdodCxcbiAgICAgIG1vYmlsZS5sb2NhdGlvbi54LCBtb2JpbGUubG9jYXRpb24ueSxcbiAgICAgIG1vYmlsZS5mcmFtZVdpZHRoLCBtb2JpbGUuZnJhbWVIZWlnaHRcbiAgICApO1xuXG4gICAgSW5wdXQucmVzZXRJbnB1dHMoKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9UaWNrKG1hcCk7XG4gICAgfSwgNTAwKTtcblxuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgIElucHV0LmtleURvd24oZXZlbnQua2V5KTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcbiAgICBJbnB1dC5rZXlVcChldmVudC5rZXkpO1xuICB9KTtcblxuICB2aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgSW5wdXQubW91c2VVcChnZXRDdXJzb3JQb3NpdGlvbih2aWV3cG9ydCwgZXZlbnQpKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZ2V0Q3Vyc29yUG9zaXRpb24oY2FudmFzLCBldmVudCkge1xuICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciB4ID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICB2YXIgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICByZXR1cm4ge3g6IHgsIHk6IHl9O1xuICB9XG5cbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zdHlsZXMvaW5kZXguY3NzPzU5ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")}]);